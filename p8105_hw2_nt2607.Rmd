---
title: "p8105_hw2_nt2607"
author: "Niharika Telrandhe"
output: github_document 
date: "2022-10-05"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
```

## Problem 1
This problem focuses on NYC Transit data.

```{r Q1}
nyctransit_df = 
  read_csv(file = "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv",
col_types = cols(Route8 = "c", Route9 = "c", Route10 = "c", Route11 = "c")) %>% 
  janitor::clean_names() %>% 
  select(line, starts_with('station'),starts_with('route'), entry, vending, entrance_type, ada, -station_location) %>% 
  mutate(entry = ifelse(entry == "YES", TRUE, FALSE))
summary(nyctransit_df)
```
## Short paragraph about the dataset

This dataset contains the following variables : `r names(nyctransit_df)`

My data cleaning steps involved importing the dataset, cleaning of variable names, selecting particular variables and converting the entry variable from character to logical.

The dimensions of the resulting dataset are `r dim(nyctransit_df)`

Yes, these data are tidy.

## Answer the following questions using this data

*How many distinct stations are there?*
There are `r nrow(distinct(nyctransit_df, line, station_name))` distinct stations.
```{r}
nrow(distinct(nyctransit_df, line, station_name))
```

*How many stations are ADA compliant?*
There are `r nrow(filter(nyctransit_df, ada == TRUE))` stations that are ADA compliant.

```{r}
nrow(filter(nyctransit_df, ada == TRUE))
```

*What proportion of station entrances / exits without vending allow entrance?*
```{r}
without_vending = nrow(filter(nyctransit_df, vending == 'NO'))
without_vending

entry_no_vending = nrow(filter(nyctransit_df, vending == 'NO', entry == 'TRUE'))
entry_no_vending

Proportion = entry_no_vending/without_vending
Proportion

```

*Reformat data so that route number and route name are distinct variables. How many distinct stations serve the A train? Of the stations that serve the A train, how many are ADA compliant?*

```{r}
nyctransit_df %>%
  pivot_longer(
    route1:route11,
    names_to = "route_names",
    values_to = "route") %>% 
  filter(route == "A") %>% 
  select(station_name, line) %>% 
  distinct

nyctransit_df %>% 
  pivot_longer(
    route1:route11,
    names_to = "route_names",
    values_to = "route") %>% 
   filter(route == "A", ada == TRUE) %>% 
  select(station_name, line) %>% 
  distinct
```

## Problem 2
Read and clean the Mr. Trash Wheel sheet:

```{r trash_wheel}
mr_trash_df = read_excel("./data/Trash Wheel Collection Data.xlsx",
sheet = "Mr. Trash Wheel",
range = "A2:N549") %>%
  janitor::clean_names() %>% 
drop_na(dumpster)
```


## Problem 3
First, clean the data in pols-month.csv.

```{r}
pols_month_df = read_csv("./data/fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names() %>%
  separate(mon, into = c("year", "month", "day"), convert = TRUE)
```




